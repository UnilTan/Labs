<Window x:Class="MilkProductsBinding.Lab14Window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ЛР-14: Работа с изображениями" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Заголовок -->
        <TextBlock Grid.Row="0" Text="ЛР-14: Работа с изображениями из файловой системы" 
                   FontSize="16" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,15"/>
        
        <!-- DataGrid с изображениями -->
        <GroupBox Grid.Row="1" Header="DataGrid - Продукты с изображениями" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <DataGrid x:Name="dgProducts" Grid.Row="0" AutoGenerateColumns="False" 
                          CanUserAddRows="False" IsReadOnly="True" Margin="5"
                          RowHeight="80" SelectionChanged="dgProducts_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding idProduct}" Width="50"/>
                        
                        <!-- Столбец с изображением -->
                        <DataGridTemplateColumn Header="Фото" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="Gray" BorderThickness="1" Margin="2">
                                        <Image Source="{Binding pathFoto}" 
                                               Width="70" Height="70" 
                                               Stretch="UniformToFill"/>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <DataGridTextColumn Header="Наименование" Binding="{Binding nameProduct}" Width="200"/>
                        <DataGridTextColumn Header="Цена" Binding="{Binding priceProduct, StringFormat=F2}" Width="80"/>
                        <DataGridTextColumn Header="Категория" Binding="{Binding Category}" Width="120"/>
                        <DataGridTextColumn Header="Статус изображения" Binding="{Binding ImageStatus}" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>
                
                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="5">
                    <Button x:Name="btnLoadProducts" Content="Загрузить продукты" Click="btnLoadProducts_Click" Margin="0,0,10,0"/>
                    <TextBlock x:Name="tbProductInfo" VerticalAlignment="Center" Foreground="Blue"/>
                </StackPanel>
            </Grid>
        </GroupBox>
        
        <!-- ListView - Каталог товаров -->
        <GroupBox Grid.Row="2" Header="ListView - Каталог товаров (плитки с изображениями)" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <ListView x:Name="lvProducts" Grid.Row="0" Margin="5" 
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                    <ListView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ListView.ItemsPanel>
                    
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="LightGray" BorderThickness="2" 
                                    CornerRadius="5" Margin="5" Padding="10"
                                    Background="White" Width="180" Height="220">
                                <StackPanel>
                                    <!-- Изображение продукта -->
                                    <Border BorderBrush="Gray" BorderThickness="1" 
                                            HorizontalAlignment="Center" Margin="0,0,0,10">
                                        <Image Source="{Binding pathFoto}" 
                                               Width="120" Height="120" 
                                               Stretch="UniformToFill"/>
                                    </Border>
                                    
                                    <!-- Информация о продукте -->
                                    <TextBlock Text="{Binding nameProduct}" 
                                               FontWeight="Bold" FontSize="12" 
                                               TextWrapping="Wrap" HorizontalAlignment="Center"
                                               Margin="0,0,0,5"/>
                                    
                                    <TextBlock Text="{Binding priceProduct, StringFormat='Цена: {0:F2} ₽'}" 
                                               FontSize="11" HorizontalAlignment="Center"
                                               Foreground="Green" FontWeight="Bold"
                                               Margin="0,0,0,3"/>
                                    
                                    <TextBlock Text="{Binding ImageStatus}" 
                                               FontSize="9" HorizontalAlignment="Center"
                                               Foreground="Blue"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
                
                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="5">
                    <Button x:Name="btnLoadCatalog" Content="Загрузить каталог" Click="btnLoadCatalog_Click" Margin="0,0,10,0"/>
                    <TextBlock x:Name="tbCatalogInfo" VerticalAlignment="Center" Foreground="Blue"/>
                </StackPanel>
            </Grid>
        </GroupBox>
        
        <!-- Информация -->
        <TextBlock Grid.Row="3" x:Name="tbStatus" Text="Готов к работе" 
                   Background="LightYellow" Padding="10" TextAlignment="Center"/>
    </Grid>
</Window>